import{r as a,o as q,j as e,R as k,s as G,A as L,m as v,a as O,d as z,b as S,u as E,c as A,e as M,f as W}from"./index-BBUDq68g.js";const B=k.memo(({onLogin:u,auth:j})=>{const[s,d]=a.useState(""),[t,p]=a.useState(""),[h,l]=a.useState(""),[n,o]=a.useState(!1),b=async m=>{m.preventDefault(),o(!0),l("");try{await O(j,s,t),u(!0)}catch(i){console.error("Login error:",i),l("Invalid email or password.")}finally{o(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto p-8 rounded-2xl glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Admin Login"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#4b5563] mb-1",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Email",value:s,onChange:m=>d(m.target.value),className:"input-field",required:!0,disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#4b5563] mb-1",children:"Password"}),e.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:m=>p(m.target.value),className:"input-field",required:!0,disabled:n})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:n,children:n?"Logging in...":"Login"})]}),h&&e.jsx("p",{className:"text-center mt-4 text-red-500",children:h})]})}),H=k.memo(({db:u,fetchProjects:j,existingProject:s,onDone:d})=>{const[t,p]=a.useState({title:s?.title||"",description:s?.description||"",imageUrl:s?.imageUrl||"",projectLink:s?.projectLink||"",tags:s?.tags?.join(", ")||""}),[h,l]=a.useState(""),n=!!s?.id,o=m=>{const{name:i,value:r}=m.target;p(f=>({...f,[i]:r}))},b=async m=>{m.preventDefault(),l(n?"Updating project...":"Adding project...");try{const i={...t,tags:t.tags.split(",").map(r=>r.trim()).filter(r=>r)};n?await E(S(u,"projects",s.id),i):await A(M(u,"projects"),i),l(`Project ${n?"updated":"added"} successfully!`),j(),setTimeout(()=>d(),1500)}catch(i){console.error("Error saving project:",i),l(`Error: ${i.message}`)}};return e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:n?"Edit Project":"Add New Project"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"title",placeholder:"Project Title",value:t.title,onChange:o,className:"input-field",required:!0}),e.jsx("textarea",{name:"description",placeholder:"Project Description",value:t.description,onChange:o,className:"input-field h-32",required:!0}),e.jsx("input",{type:"text",name:"imageUrl",placeholder:"Image URL",value:t.imageUrl,onChange:o,className:"input-field"}),e.jsx("input",{type:"text",name:"projectLink",placeholder:"Project Link",value:t.projectLink,onChange:o,className:"input-field"}),e.jsx("input",{type:"text",name:"tags",placeholder:"Tags (e.g., React, Firebase, CSS)",value:t.tags,onChange:o,className:"input-field"}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:n?"Update Project":"Add Project"}),e.jsx("button",{type:"button",onClick:d,className:"btn-secondary w-full",children:"Cancel"}),h&&e.jsx("p",{className:"text-center mt-4 text-[#2563eb]",children:h})]})]})}),J=k.memo(({db:u,fetchAllData:j,existingSkill:s,categories:d,onDone:t})=>{const[p,h]=a.useState({name:s?.name||"",level:s?.level||80}),[l,n]=a.useState(s?.category||d[0]||""),[o,b]=a.useState(""),[m,i]=a.useState(""),r=!!s?.id,f=x=>{const{name:N,value:g}=x.target;h(C=>({...C,[N]:N==="level"?parseInt(g,10):g}))},y=async x=>{x.preventDefault();const N=o.trim()||l;if(!p.name||!N){i("Skill name and category are required.");return}i(r?"Updating skill...":"Adding skill...");try{const g={...p,category:N};r?await E(S(u,"skills",s.id),g):await A(M(u,"skills"),g),i(`Skill ${r?"updated":"added"} successfully!`),j(),setTimeout(()=>t(),1500)}catch(g){console.error("Error saving skill:",g),i(`Error: ${g.message}`)}};return e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:r?"Edit Skill":"Add New Skill"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Skill Name (e.g., Python)",value:p.name,onChange:f,className:"input-field",required:!0}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#4b5563] mb-1",children:["Proficiency Level: ",p.level,"%"]}),e.jsx("input",{type:"range",name:"level",min:"1",max:"100",value:p.level,onChange:f,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),e.jsx("select",{name:"category",value:l,onChange:x=>n(x.target.value),className:"input-field",children:d.map(x=>e.jsx("option",{value:x,children:x},x))}),e.jsx("input",{type:"text",name:"newCategory",placeholder:"Or create a new category",value:o,onChange:x=>b(x.target.value),className:"input-field"}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:r?"Update Skill":"Add Skill"}),e.jsx("button",{type:"button",onClick:t,className:"btn-secondary w-full",children:"Cancel"}),m&&e.jsx("p",{className:"text-center mt-4 text-[#2563eb]",children:m})]})]})}),K=k.memo(({db:u,fetchAllData:j,initialData:s,onDone:d})=>{const[t,p]=a.useState({licensesPdfUrl:s.licensesPdfUrl||"",internshipsPdfUrl:s.internshipsPdfUrl||""}),[h,l]=a.useState(""),[n,o]=a.useState(!1),b=i=>{const{name:r,value:f}=i.target;p(y=>({...y,[r]:f}))},m=async i=>{i.preventDefault(),o(!0),l("Updating URLs...");try{const r=S(u,"portfolioAssets","pdfs");await W(r,t,{merge:!0}),l("URLs updated successfully!"),j(),setTimeout(()=>d(),1500)}catch(r){console.error("Error updating URLs:",r),l(`Error: ${r.message}`)}finally{o(!1)}};return e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Manage Certification PDFs"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#4b5563] mb-1",children:"Certifications PDF URL"}),e.jsx("input",{type:"url",name:"licensesPdfUrl",placeholder:"Google Drive PDF Link",value:t.licensesPdfUrl,onChange:b,className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#4b5563] mb-1",children:"Internships PDF URL"}),e.jsx("input",{type:"url",name:"internshipsPdfUrl",placeholder:"Google Drive PDF Link",value:t.internshipsPdfUrl,onChange:b,className:"input-field"})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:n,children:n?"Updating...":"Update URLs"}),e.jsx("button",{type:"button",onClick:d,className:"btn-secondary w-full",disabled:n,children:"Cancel"}),h&&e.jsx("p",{className:"text-center mt-4 text-[#2563eb]",children:h})]})]})}),Q=k.memo(({db:u,projects:j,skills:s,fetchAllData:d,auth:t,licensesPdfUrl:p,internshipsPdfUrl:h})=>{const[l,n]=a.useState("projects"),[o,b]=a.useState(null),[m,i]=a.useState(null),[r,f]=a.useState(!1),[y,x]=a.useState(""),[N,g]=a.useState(!1),[C,D]=a.useState(null),F=s?[...new Set(s.map(c=>c.category))]:[];a.useEffect(()=>{if(y){const c=setTimeout(()=>x(""),4e3);return()=>clearTimeout(c)}},[y]);const U=(c,P,w)=>{D({collectionName:c,id:P,itemName:w}),g(!0)},R=async()=>{const{collectionName:c,id:P,itemName:w}=C;x(`Deleting ${w}...`),g(!1);try{await z(S(u,c,P)),x(`${w} deleted successfully.`),d()}catch(I){x(`Error: ${I.message}`)}},T=()=>{g(!1),D(null)};if(o)return e.jsx(H,{db:u,fetchProjects:d,existingProject:o,onDone:()=>b(null)});if(m)return e.jsx(J,{db:u,fetchAllData:d,existingSkill:m,categories:F,onDone:()=>i(null)});if(r)return e.jsx(K,{db:u,fetchAllData:d,initialData:{licensesPdfUrl:p,internshipsPdfUrl:h},onDone:()=>f(!1)});const $=a.useCallback(async()=>{try{await G(t)}catch(c){console.error("Logout error:",c)}},[t]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center border-b border-gray-300 mb-8",children:[e.jsx("button",{onClick:()=>n("projects"),className:`py-2 px-6 font-semibold ${l==="projects"?"text-[#2563eb] border-b-2 border-[#2563eb]":"text-gray-500"}`,children:"Manage Projects"}),e.jsx("button",{onClick:()=>n("skills"),className:`py-2 px-6 font-semibold ${l==="skills"?"text-[#2563eb] border-b-2 border-[#2563eb]":"text-gray-500"}`,children:"Manage Skills"}),e.jsx("button",{onClick:()=>n("certifications"),className:`py-2 px-6 font-semibold ${l==="certifications"?"text-[#2563eb] border-b-2 border-[#2563eb]":"text-gray-500"}`,children:"Manage Certifications"})]}),e.jsx(L,{mode:"wait",children:e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[l==="projects"&&e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Projects"}),e.jsx("button",{onClick:()=>b({}),className:"btn-primary mb-4",children:"Add New Project"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:j?.map(c=>e.jsxs(v.div,{layout:!0,className:"flex justify-between items-center bg-white/50 p-3 rounded-lg",children:[e.jsx("span",{children:c.title}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>b(c),className:"text-[#2563eb] hover:underline mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>U("projects",c.id,"project"),className:"text-red-500 hover:underline",children:"Delete"})]})]},c.id))})]}),l==="skills"&&e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Skills"}),e.jsx("button",{onClick:()=>i({}),className:"btn-primary mb-4",children:"Add New Skill"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:s?.map(c=>e.jsxs(v.div,{layout:!0,className:"flex justify-between items-center bg-white/50 p-3 rounded-lg",children:[e.jsxs("span",{children:[c.name," (",c.category,")"]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>i(c),className:"text-[#2563eb] hover:underline mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>U("skills",c.id,"skill"),className:"text-red-500 hover:underline",children:"Delete"})]})]},c.id))})]}),l==="certifications"&&e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Certifications & Internships"}),e.jsx("p",{className:"text-[#4b5563] mb-4",children:"Update the Google Drive links for your certification and internship PDFs. Make sure the links are publicly accessible."}),e.jsx("button",{onClick:()=>f(!0),className:"btn-primary w-full",children:"Update PDF Links"})]})]},l)}),e.jsxs("div",{className:"mt-8",children:[y&&e.jsx("p",{className:"text-center p-3 rounded-lg bg-[#dbeafe] text-[#1e3a8a] font-medium mb-4",children:y}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:$,className:"btn-secondary",children:"Logout"})})]}),e.jsx(L,{children:N&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[100] flex justify-center items-center",children:e.jsxs(v.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"bg-white p-8 rounded-2xl shadow-xl max-w-sm w-full text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",C?.itemName,"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:R,className:"bg-red-500 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-600",children:"Delete"}),e.jsx("button",{onClick:T,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-md font-semibold hover:bg-gray-300",children:"Cancel"})]})]})})})]})}),X=({db:u,projects:j,skills:s,fetchAllData:d,auth:t,licensesPdfUrl:p,internshipsPdfUrl:h})=>{const[l,n]=a.useState(!1);return a.useEffect(()=>t?q(t,b=>{n(!!b)}):void 0,[t]),e.jsx("div",{className:"bg-[#f5f7fa] min-h-screen",children:e.jsx("div",{className:"container mx-auto px-6 py-12",children:l?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-4xl font-bold text-[#334155] text-center mb-12",children:"Admin Dashboard"}),e.jsx(Q,{db:u,projects:j,skills:s,fetchAllData:d,auth:t,licensesPdfUrl:p,internshipsPdfUrl:h})]}):e.jsx(B,{onLogin:n,auth:t})})})};export{X as default};
