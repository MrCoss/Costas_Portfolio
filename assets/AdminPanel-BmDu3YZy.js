import{r as o,o as v,j as e,A as w,m as L,s as C,d as A,a as y,b as P,c as D,u as S,e as U,f as k}from"./index-DfuKe5zg.js";const E=({onLogin:i,message:h,auth:t})=>{const[r,n]=o.useState(""),[c,p]=o.useState(""),[a,l]=o.useState(h),u=async d=>{d.preventDefault(),l("Logging in...");try{await C(t,r,c),l("Login successful!"),i(!0)}catch(m){console.error("Login error:",m),l(`Login failed: ${m.message}`),i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f5f7fa]",children:e.jsxs("form",{onSubmit:u,className:"p-8 rounded-2xl w-full max-w-sm glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] text-center mb-6",children:"Admin Login"}),e.jsx("input",{type:"email",value:r,onChange:d=>n(d.target.value),placeholder:"Email",className:"input-field mb-4",required:!0}),e.jsx("input",{type:"password",value:c,onChange:d=>p(d.target.value),placeholder:"Password",className:"input-field mb-4",required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Login"}),a&&e.jsx("p",{className:"text-red-500 text-center mt-4",children:a})]})})},$=({db:i,fetchProjects:h,existingProject:t,onDone:r})=>{const[n,c]=o.useState({title:t?.title||"",description:t?.description||"",tags:Array.isArray(t?.tags)?t.tags.join(", "):t?.tags||"",projectLink:t?.projectLink||"",imageUrl:t?.imageUrl||""}),[p,a]=o.useState(""),l=!!t,u=m=>{const{name:j,value:g}=m.target;c(x=>({...x,[j]:g}))},d=async m=>{m.preventDefault(),a(l?"Updating...":"Adding...");const j=(n.tags||"").split(",").map(x=>x.trim()).filter(Boolean),g={...n,tags:j};try{l?await S(y(i,"projects",t.id),g):await U(k(i,"projects"),g),a(`Project ${l?"updated":"added"} successfully!`),h(),setTimeout(()=>r(),1500)}catch(x){console.error(x),a(`Error: ${x.message}`)}};return e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:l?"Edit Project":"Add New Project"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"title",placeholder:"Project Title",value:n.title,onChange:u,className:"input-field",required:!0}),e.jsx("textarea",{name:"description",placeholder:"Description",value:n.description,onChange:u,className:"input-field",required:!0}),e.jsx("input",{type:"text",name:"tags",placeholder:"Tags (comma-separated)",value:n.tags,onChange:u,className:"input-field"}),e.jsxs("label",{className:"block text-sm font-medium text-[#4b5563] mt-4",children:["Image URL (e.g., Imgur)",e.jsx("input",{type:"url",name:"imageUrl",placeholder:"Paste image link here",value:n.imageUrl,onChange:u,className:"input-field"})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:l?"Update Project":"Add Project"}),e.jsx("button",{type:"button",onClick:r,className:"btn-secondary w-full",children:"Cancel"}),p&&e.jsx("p",{className:"text-center mt-4 text-[#2563eb]",children:p})]})]})},q=({db:i,projects:h,fetchProjects:t,auth:r})=>{const[n,c]=o.useState(null),[p,a]=o.useState(""),[l,u]=o.useState(""),[d,m]=o.useState("");if(n)return e.jsx($,{db:i,fetchProjects:t,existingProject:n,onDone:()=>c(null)});const j=async s=>{if(window.confirm("Are you sure you want to delete this project?")){a("Deleting...");try{await A(y(i,"projects",s)),a("Project deleted."),t()}catch(b){a(`Error: ${b.message}`)}}},g=async(s,b,f)=>{if(s.preventDefault(),!!b){a(`Updating ${f}...`);try{await P(y(i,"portfolioAssets",f),{pdfUrl:b}),a(`${f} link updated successfully!`),f==="licenses"&&u(""),f==="internships"&&m(""),t()}catch(N){a(`Error: ${N.message}`)}}},x=async()=>{try{await D(r),window.location.hash=""}catch(s){console.error("Logout error:",s)}};return e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"p-8 rounded-2xl glass-card lg:col-span-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Manage Projects"}),e.jsx("button",{onClick:()=>c({}),className:"btn-primary mb-4",children:"Add New Project"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:e.jsx(w,{children:h.map(s=>e.jsxs(L.div,{layout:!0,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"flex justify-between items-center bg-white/50 p-3 rounded-lg",children:[e.jsx("span",{className:"text-[#4b5563] font-medium",children:s.title}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>c(s),className:"text-[#2563eb] hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>j(s.id),className:"text-red-500 hover:underline",children:"Delete"})]})]},s.id))})})]}),e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Update Certificate PDFs"}),e.jsxs("form",{onSubmit:s=>g(s,l,"licenses"),className:"space-y-4 mb-6",children:[e.jsx("input",{type:"url",placeholder:"Licenses & Certs PDF Link",value:l,onChange:s=>u(s.target.value),className:"input-field",required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Update Licenses"})]}),e.jsxs("form",{onSubmit:s=>g(s,d,"internships"),className:"space-y-4",children:[e.jsx("input",{type:"url",placeholder:"Internships PDF Link",value:d,onChange:s=>m(s.target.value),className:"input-field",required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Update Internships"})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[p&&e.jsx("p",{className:"text-center p-3 rounded-lg bg-[#2563eb]/10 text-[#1e3a8a]",children:p}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:x,className:"btn-secondary",children:"Logout"})})]})]})},F=({db:i,projects:h,fetchProjects:t,auth:r})=>{const[n,c]=o.useState(!1);return o.useEffect(()=>v(r,a=>{c(!!a)}),[r]),e.jsx("div",{className:"bg-[#f5f7fa] min-h-screen",children:e.jsx("div",{className:"container mx-auto px-6 py-12",children:n?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-4xl font-bold text-[#334155] text-center mb-12",children:"Admin Dashboard"}),e.jsx(q,{db:i,projects:h,fetchProjects:t,auth:r})]}):e.jsx(E,{onLogin:c,auth:r})})})};export{F as default};
