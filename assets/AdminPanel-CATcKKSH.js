import{r as s,g as H,c as E,d as w,a as K,o as W,j as e,L as X,m as g,s as B,b as J,e as Q,f as Y,h as Z,i as ee,A as te}from"./index-GySDAkG_.js";const F=({message:i,type:n,onDismiss:c})=>{if(!i)return null;const m="fixed top-5 right-5 p-4 rounded-lg shadow-lg text-text-primary-dark transition-opacity duration-300 z-50",x=n==="success"?"bg-primary-light dark:bg-primary-dark":"bg-red-500";return e.jsxs("div",{className:`${m} ${x}`,children:[e.jsx("span",{children:i}),e.jsx("button",{onClick:c,className:"ml-4 font-bold",children:"X"})]})},re=({isOpen:i,onConfirm:n,onCancel:c,title:m,message:x})=>e.jsx(te,{children:i&&e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:c,children:e.jsxs(g.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:f=>f.stopPropagation(),className:"bg-background-light dark:bg-background-alt-dark rounded-xl shadow-2xl w-full max-w-md p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary-light dark:text-text-primary-dark mb-4",children:m}),e.jsx("p",{className:"text-text-secondary-light dark:text-text-secondary-dark mb-6",children:x}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 rounded-lg bg-background-alt-light dark:bg-background-alt-dark hover:bg-slate-300 dark:hover:bg-slate-600 transition text-text-primary-light dark:text-text-primary-dark",children:"Cancel"}),e.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition",children:"Confirm"})]})]})})});function se({db:i,auth:n}){const[c,m]=s.useState(null),[x,f]=s.useState(!0),[C,P]=s.useState([]),[u,j]=s.useState({licensesPdfUrl:"",internshipsPdfUrl:""}),[y,h]=s.useState({message:"",type:""}),[k,v]=s.useState({isOpen:!1,onConfirm:()=>{}}),[S,O]=s.useState(""),[A,R]=s.useState(""),[a,d]=s.useState({title:"",description:"",link:"",tags:[],mediaUrl:""}),[b,D]=s.useState(""),[o,p]=s.useState(!1),[L]=s.useState(0),l=s.useCallback((t,r="error")=>{h({message:t,type:r}),setTimeout(()=>h({message:"",type:""}),5e3)},[]),N=s.useCallback(async()=>{try{const t=await H(E(i,"projects"));P(t.docs.map(r=>({id:r.id,...r.data()})))}catch{l("Failed to fetch projects.")}},[i,l]),U=s.useCallback(async()=>{try{const t=w(i,"portfolioAssets","main"),r=await K(t);r.exists()&&j(r.data())}catch{l("Failed to fetch asset links.")}},[i,l]);s.useEffect(()=>{const t=W(n,r=>{m(r),r&&(N(),U()),f(!1)});return()=>t()},[n,N,U]);const T=async t=>{t.preventDefault(),p(!0);try{await B(n,S,A)}catch{l("Login failed: Invalid credentials.")}finally{p(!1)}},I=async()=>{await J(n)},M=t=>{t.key==="Enter"&&b&&(t.preventDefault(),a.tags.includes(b.trim())||d({...a,tags:[...a.tags,b.trim()]}),D(""))},q=t=>{d({...a,tags:a.tags.filter(r=>r!==t)})},$=async t=>{if(t.preventDefault(),!a.title.trim())return l("Project title is required.");p(!0);try{await Q(E(i,"projects"),{...a,createdAt:Y()}),d({title:"",description:"",link:"",tags:[],mediaUrl:""}),t.target.reset(),l("Project added successfully!","success"),N()}catch{l("Failed to add project.")}finally{p(!1)}},z=t=>{v({isOpen:!0,onConfirm:()=>G(t),title:"Confirm Deletion",message:"Are you sure you want to delete this project? This action cannot be undone."})},G=async t=>{try{await Z(w(i,"projects",t)),P(r=>r.filter(_=>_.id!==t)),l("Project deleted successfully.","success")}catch{l("Failed to delete project.")}finally{v({isOpen:!1,onConfirm:()=>{}})}},V=async t=>{t.preventDefault(),p(!0);try{const r=w(i,"portfolioAssets","main");await ee(r,u,{merge:!0}),l("Asset links updated successfully!","success")}catch{l("Failed to update asset links.")}finally{p(!1)}};return x?e.jsx(X,{}):c?e.jsxs(e.Fragment,{children:[e.jsx(re,{isOpen:k.isOpen,onConfirm:k.onConfirm,onCancel:()=>v({isOpen:!1,onConfirm:()=>{}}),title:k.title,message:k.message}),e.jsxs("div",{className:"min-h-screen bg-background-alt-light dark:bg-background-alt-dark p-4 sm:p-6 md:p-8",children:[e.jsx(F,{message:y.message,type:y.type,onDismiss:()=>h({message:"",type:""})}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-text-primary-light dark:text-text-primary-dark",children:"Admin Dashboard"}),e.jsx("button",{onClick:I,className:"bg-secondary-light dark:bg-secondary-dark text-white dark:text-text-primary-dark px-5 py-2 rounded-lg font-semibold hover:bg-secondary-hover dark:hover:bg-secondary-dark-hover transition-colors",children:"Logout"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-background-light dark:bg-background-dark p-6 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark mb-4",children:"Add New Project"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Project Title",value:a.title,onChange:t=>d({...a,title:t.target.value}),className:"w-full px-4 py-2 bg-transparent border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark text-text-primary-light dark:text-text-primary-dark"}),e.jsx("textarea",{placeholder:"Description",value:a.description,onChange:t=>d({...a,description:t.target.value}),className:"w-full px-4 py-2 bg-transparent border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark text-text-primary-light dark:text-text-primary-dark",rows:"3"}),e.jsx("input",{type:"url",placeholder:"Project Link (e.g., GitHub)",value:a.link,onChange:t=>d({...a,link:t.target.value}),className:"w-full px-4 py-2 bg-transparent border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark text-text-primary-light dark:text-text-primary-dark"}),e.jsx("input",{type:"url",placeholder:"Project Media URL (e.g., GDrive link)",value:a.mediaUrl,onChange:t=>d({...a,mediaUrl:t.target.value}),className:"w-full px-4 py-2 bg-transparent border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark text-text-primary-light dark:text-text-primary-dark"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Add skills/tags and press Enter",value:b,onChange:t=>D(t.target.value),onKeyDown:M,className:"w-full px-4 py-2 bg-transparent border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark text-text-primary-light dark:text-text-primary-dark"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.tags.map(t=>e.jsxs("span",{className:"bg-primary-light/10 dark:bg-primary-dark/10 text-primary-light dark:text-primary-dark text-xs font-semibold px-2.5 py-1 rounded-full flex items-center",children:[t,e.jsx("button",{type:"button",onClick:()=>q(t),className:"ml-2 text-primary-light/70 dark:text-primary-dark/70 hover:text-primary-light dark:hover:text-primary-dark",children:"x"})]},t))})]}),o&&L>0&&e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:e.jsx("div",{className:"bg-primary-light dark:bg-primary-dark h-2.5 rounded-full",style:{width:`${L}%`}})}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary-light dark:bg-primary-dark text-text-primary-dark dark:text-text-primary-light py-2 rounded-lg font-semibold hover:bg-primary-hover dark:hover:bg-primary-dark-hover transition disabled:opacity-50",children:o?"Adding Project...":"Add Project"})]})]}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-background-light dark:bg-background-dark p-6 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark mb-4",children:"Manage Asset Links"}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsx("input",{type:"url",placeholder:"Licenses & Certs PDF URL",value:u.licensesPdfUrl,onChange:t=>j({...u,licensesPdfUrl:t.target.value}),className:"w-full px-4 py-2 bg-transparent border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark text-text-primary-light dark:text-text-primary-dark"}),e.jsx("input",{type:"url",placeholder:"Internship Certs PDF URL",value:u.internshipsPdfUrl,onChange:t=>j({...u,internshipsPdfUrl:t.target.value}),className:"w-full px-4 py-2 bg-transparent border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark text-text-primary-light dark:text-text-primary-dark"}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary-light dark:bg-primary-dark text-text-primary-dark dark:text-text-primary-light py-2 rounded-lg font-semibold hover:bg-primary-hover dark:hover:bg-primary-dark-hover transition disabled:opacity-50",children:o?"Saving...":"Save Links"})]})]})]}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"lg:col-span-2 bg-background-light dark:bg-background-dark p-6 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark mb-4",children:"Manage Projects"}),e.jsx("div",{className:"space-y-4",children:C.length>0?C.map(t=>e.jsxs("div",{className:"flex items-start justify-between border-b border-slate-200 dark:border-slate-700 py-3",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary-light dark:text-text-primary-dark",children:t.title}),e.jsx("p",{className:"text-text-secondary-light dark:text-text-secondary-dark text-sm mt-1",children:t.description}),t.link&&e.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-secondary-light dark:text-secondary-dark hover:underline text-sm",children:"View Project"}),t.mediaUrl&&e.jsx("a",{href:t.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary-light dark:text-primary-dark hover:underline text-sm ml-2",children:"View Media"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.tags?.map(r=>e.jsx("span",{className:"bg-background-alt-light dark:bg-background-alt-dark text-text-primary-light dark:text-text-primary-dark text-xs font-medium px-2 py-0.5 rounded-full",children:r},r))})]}),e.jsx("button",{onClick:()=>z(t.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-red-600 transition flex-shrink-0",children:"Delete"})]},t.id)):e.jsx("p",{className:"text-text-secondary-light dark:text-text-secondary-dark",children:"No projects found. Add one to get started!"})})]})]})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-background-alt-light dark:bg-background-alt-dark flex items-center justify-center p-4",children:[e.jsx(F,{message:y.message,type:y.type,onDismiss:()=>h({message:"",type:""})}),e.jsx(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-background-light dark:bg-background-dark shadow-2xl rounded-xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-text-primary-light dark:text-text-primary-dark text-center mb-6",children:"Admin Login"}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsx("input",{type:"email",placeholder:"Email",value:S,onChange:t=>O(t.target.value),className:"w-full px-4 py-3 bg-transparent border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark transition text-text-primary-light dark:text-text-primary-dark",required:!0}),e.jsx("input",{type:"password",placeholder:"Password",value:A,onChange:t=>R(t.target.value),className:"w-full px-4 py-3 bg-transparent border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark transition text-text-primary-light dark:text-text-primary-dark",required:!0}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary-light dark:bg-primary-dark text-white dark:text-text-primary-dark px-4 py-3 rounded-lg font-semibold hover:bg-primary-hover dark:hover:bg-primary-dark-hover transition-colors disabled:opacity-50",children:o?"Logging in...":"Login"})]})]})})]})}export{se as default};
