import{r as n,g as G,c as U,d as k,a as H,o as K,j as e,L as W,m,s as X,b as B,e as J,f as Q,h as Y,i as Z,A as ee}from"./index-BaGKF_9I.js";const E=({message:i,type:l,onDismiss:c})=>{if(!i)return null;const p="fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white transition-opacity duration-300 z-50",x=l==="success"?"bg-primary":"bg-red-500";return e.jsxs("div",{className:`${p} ${x}`,children:[e.jsx("span",{children:i}),e.jsx("button",{onClick:c,className:"ml-4 font-bold",children:"X"})]})},se=({isOpen:i,onConfirm:l,onCancel:c,title:p,message:x})=>e.jsx(ee,{children:i&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:c,children:e.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:j=>j.stopPropagation(),className:"bg-background rounded-xl shadow-2xl w-full max-w-md p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:p}),e.jsx("p",{className:"text-text-secondary mb-6",children:x}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 rounded-lg bg-slate-200 hover:bg-slate-300 transition text-text-primary",children:"Cancel"}),e.jsx("button",{onClick:l,className:"px-4 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition",children:"Confirm"})]})]})})});function ae({db:i,auth:l}){const[c,p]=n.useState(null),[x,j]=n.useState(!0),[C,P]=n.useState([]),[g,v]=n.useState({licensesPdfUrl:"",internshipsPdfUrl:""}),[f,h]=n.useState({message:"",type:""}),[y,N]=n.useState({isOpen:!1,onConfirm:()=>{}}),[A,F]=n.useState(""),[S,I]=n.useState(""),[a,o]=n.useState({title:"",description:"",link:"",tags:[],mediaUrl:""}),[b,D]=n.useState(""),[d,u]=n.useState(!1),r=n.useCallback((s,t="error")=>{h({message:s,type:t}),setTimeout(()=>h({message:"",type:""}),5e3)},[]),w=n.useCallback(async()=>{try{const s=await G(U(i,"projects"));P(s.docs.map(t=>({id:t.id,...t.data()})))}catch{r("Failed to fetch projects.")}},[i,r]),L=n.useCallback(async()=>{try{const s=k(i,"portfolioAssets","main"),t=await H(s);t.exists()&&v(t.data())}catch{r("Failed to fetch asset links.")}},[i,r]);n.useEffect(()=>{const s=K(l,t=>{p(t),t&&(w(),L()),j(!1)});return()=>s()},[l,w,L]);const O=async s=>{s.preventDefault(),u(!0);try{await X(l,A,S)}catch{r("Login failed: Invalid credentials.")}finally{u(!1)}},R=async()=>{await B(l)},T=s=>{s.key==="Enter"&&b&&(s.preventDefault(),a.tags.includes(b.trim())||o({...a,tags:[...a.tags,b.trim()]}),D(""))},M=s=>{o({...a,tags:a.tags.filter(t=>t!==s)})},q=async s=>{if(s.preventDefault(),!a.title.trim())return r("Project title is required.");u(!0);try{await J(U(i,"projects"),{...a,createdAt:Q()}),o({title:"",description:"",link:"",tags:[],mediaUrl:""}),r("Project added successfully!","success"),w()}catch{r("Failed to add project.")}finally{u(!1)}},V=s=>{N({isOpen:!0,onConfirm:()=>z(s),title:"Confirm Deletion",message:"Are you sure you want to delete this project? This action cannot be undone."})},z=async s=>{try{await Y(k(i,"projects",s)),P(t=>t.filter($=>$.id!==s)),r("Project deleted successfully.","success")}catch{r("Failed to delete project.")}finally{N({isOpen:!1,onConfirm:()=>{}})}},_=async s=>{s.preventDefault(),u(!0);try{const t=k(i,"portfolioAssets","main");await Z(t,g,{merge:!0}),r("Asset links updated successfully!","success")}catch{r("Failed to update asset links.")}finally{u(!1)}};return x?e.jsx(W,{}):c?e.jsxs(e.Fragment,{children:[e.jsx(se,{isOpen:y.isOpen,onConfirm:y.onConfirm,onCancel:()=>N({isOpen:!1,onConfirm:()=>{}}),title:y.title,message:y.message}),e.jsxs("div",{className:"min-h-screen bg-background-alt p-4 sm:p-6 md:p-8",children:[e.jsx(E,{message:f.message,type:f.type,onDismiss:()=>h({message:"",type:""})}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-text-primary",children:"Admin Dashboard"}),e.jsx("button",{onClick:R,className:"bg-secondary text-white px-5 py-2 rounded-lg font-semibold hover:bg-secondary-hover transition-colors",children:"Logout"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-background p-6 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Add New Project"}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Project Title",value:a.title,onChange:s=>o({...a,title:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("textarea",{placeholder:"Description",value:a.description,onChange:s=>o({...a,description:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:"3"}),e.jsx("input",{type:"url",placeholder:"Project Link (e.g., GitHub)",value:a.link,onChange:s=>o({...a,link:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("input",{type:"url",placeholder:"Media URL (Image or Video)",value:a.mediaUrl,onChange:s=>o({...a,mediaUrl:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Add skills/tags and press Enter",value:b,onChange:s=>D(s.target.value),onKeyDown:T,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.tags.map(s=>e.jsxs("span",{className:"bg-primary/10 text-primary text-xs font-semibold px-2.5 py-1 rounded-full flex items-center",children:[s,e.jsx("button",{type:"button",onClick:()=>M(s),className:"ml-2 text-primary/70 hover:text-primary",children:"x"})]},s))})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-primary text-white py-2 rounded-lg font-semibold hover:bg-primary-hover transition disabled:bg-slate-400",children:d?"Adding...":"Add Project"})]})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-background p-6 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Manage Asset Links"}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsx("input",{type:"url",placeholder:"Licenses & Certs PDF URL",value:g.licensesPdfUrl,onChange:s=>v({...g,licensesPdfUrl:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("input",{type:"url",placeholder:"Internship Certs PDF URL",value:g.internshipsPdfUrl,onChange:s=>v({...g,internshipsPdfUrl:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-primary text-white py-2 rounded-lg font-semibold hover:bg-primary-hover transition disabled:bg-slate-400",children:d?"Saving...":"Save Links"})]})]})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"lg:col-span-2 bg-background p-6 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Manage Projects"}),e.jsx("div",{className:"space-y-4",children:C.length>0?C.map(s=>e.jsxs("div",{className:"flex items-start justify-between border-b border-slate-200 py-3",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary",children:s.title}),e.jsx("p",{className:"text-text-secondary text-sm mt-1",children:s.description}),s.link&&e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-secondary hover:underline text-sm",children:"View Project"}),s.mediaUrl&&e.jsx("a",{href:s.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline text-sm ml-2",children:"View Media"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.tags?.map(t=>e.jsx("span",{className:"bg-slate-200 text-slate-700 text-xs font-medium px-2 py-0.5 rounded-full",children:t},t))})]}),e.jsx("button",{onClick:()=>V(s.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-red-600 transition flex-shrink-0",children:"Delete"})]},s.id)):e.jsx("p",{className:"text-text-secondary",children:"No projects found. Add one to get started!"})})]})]})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-background-alt flex items-center justify-center p-4",children:[e.jsx(E,{message:f.message,type:f.type,onDismiss:()=>h({message:"",type:""})}),e.jsx(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-background shadow-2xl rounded-xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-text-primary text-center mb-6",children:"Admin Login"}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsx("input",{type:"email",placeholder:"Email",value:A,onChange:s=>F(s.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition",required:!0}),e.jsx("input",{type:"password",placeholder:"Password",value:S,onChange:s=>I(s.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition",required:!0}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-primary text-white px-4 py-3 rounded-lg font-semibold hover:bg-primary-hover transition-colors disabled:bg-slate-400",children:d?"Logging in...":"Login"})]})]})})]})}export{ae as default};
