import{r as o,o as f,j as e,A as b,m as y,s as N,d as w,a as j,b as v,u as A,c as C,e as L}from"./index-KNZels1u.js";const E=({onLogin:i,message:x,auth:t})=>{const[n,a]=o.useState(""),[l,d]=o.useState(""),[r,c]=o.useState(x),m=async s=>{s.preventDefault(),c("Logging in...");try{await N(t,n,l),c("Login successful!"),i(!0)}catch(u){console.error("Login error:",u),c(`Login failed: ${u.message}`),i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f5f7fa]",children:e.jsxs("form",{onSubmit:m,className:"p-8 rounded-2xl w-full max-w-sm glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] text-center mb-6",children:"Admin Login"}),e.jsx("input",{type:"email",value:n,onChange:s=>a(s.target.value),placeholder:"Email",className:"input-field mb-4",required:!0}),e.jsx("input",{type:"password",value:l,onChange:s=>d(s.target.value),placeholder:"Password",className:"input-field mb-4",required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Login"}),r&&e.jsx("p",{className:"text-red-500 text-center mt-4",children:r})]})})},S=({db:i,fetchProjects:x,existingProject:t,onDone:n})=>{const[a,l]=o.useState({title:t?.title||"",description:t?.description||"",tags:Array.isArray(t?.tags)?t.tags.join(", "):t?.tags||"",projectLink:t?.projectLink||"",imageUrl:t?.imageUrl||""}),[d,r]=o.useState(""),c=!!t,m=u=>{const{name:g,value:h}=u.target;l(p=>({...p,[g]:h}))},s=async u=>{u.preventDefault(),r(c?"Updating...":"Adding...");const g=(a.tags||"").split(",").map(p=>p.trim()).filter(Boolean),h={...a,tags:g};try{c?await A(j(i,"projects",t.id),h):await C(L(i,"projects"),h),r(`Project ${c?"updated":"added"} successfully!`),x(),setTimeout(()=>n(),1500)}catch(p){console.error(p),r(`Error: ${p.message}`)}};return e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:c?"Edit Project":"Add New Project"}),e.jsxs("form",{onSubmit:s,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"title",placeholder:"Project Title",value:a.title,onChange:m,className:"input-field",required:!0}),e.jsx("textarea",{name:"description",placeholder:"Description",value:a.description,onChange:m,className:"input-field",required:!0}),e.jsx("input",{type:"text",name:"tags",placeholder:"Tags (comma-separated)",value:a.tags,onChange:m,className:"input-field"}),e.jsxs("label",{className:"block text-sm font-medium text-[#4b5563] mt-4",children:["Image URL (e.g., Imgur)",e.jsx("input",{type:"url",name:"imageUrl",placeholder:"Paste image link here",value:a.imageUrl,onChange:m,className:"input-field"})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:c?"Update Project":"Add Project"}),e.jsx("button",{type:"button",onClick:n,className:"btn-secondary w-full",children:"Cancel"}),d&&e.jsx("p",{className:"text-center mt-4 text-[#2563eb]",children:d})]})]})},D=({db:i,projects:x,fetchProjects:t,auth:n})=>{const[a,l]=o.useState(null),[d,r]=o.useState("");if(a)return e.jsx(S,{db:i,fetchProjects:t,existingProject:a,onDone:()=>l(null)});const c=async s=>{if(window.confirm("Are you sure you want to delete this project?")){r("Deleting...");try{await w(j(i,"projects",s)),r("Project deleted."),t()}catch(u){r(`Error: ${u.message}`)}}},m=async()=>{try{await v(n),window.location.hash=""}catch(s){console.error("Logout error:",s)}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Manage Projects"}),e.jsx("button",{onClick:()=>l({}),className:"btn-primary mb-4",children:"Add New Project"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:e.jsx(b,{children:x.map(s=>e.jsxs(y.div,{layout:!0,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"flex justify-between items-center bg-white/50 p-3 rounded-lg",children:[e.jsx("span",{className:"text-[#4b5563] font-medium",children:s.title}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>l(s),className:"text-[#2563eb] hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>c(s.id),className:"text-red-500 hover:underline",children:"Delete"})]})]},s.id))})})]}),d&&e.jsx("p",{className:"text-center p-3 rounded-lg bg-[#2563eb]/10 text-[#1e3a8a]",children:d}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:m,className:"btn-secondary",children:"Logout"})})]})},k=({db:i,projects:x,fetchProjects:t,auth:n})=>{const[a,l]=o.useState(!1);return o.useEffect(()=>f(n,r=>{l(!!r)}),[n]),e.jsx("div",{className:"bg-[#f5f7fa] min-h-screen",children:e.jsx("div",{className:"container mx-auto px-6 py-12",children:a?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-4xl font-bold text-[#334155] text-center mb-12",children:"Admin Dashboard"}),e.jsx(D,{db:i,projects:x,fetchProjects:t,auth:n})]}):e.jsx(E,{onLogin:l,auth:n})})})};export{k as default};
