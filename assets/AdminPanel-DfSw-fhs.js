import{r as l,o as $,j as e,R as k,s as q,A as D,m as N,a as I,d as R,b as E,u as P,c as A,e as L}from"./index-D5Jzxzd2.js";const F=k.memo(({onLogin:m,auth:g})=>{const[s,u]=l.useState(""),[t,i]=l.useState(""),[x,p]=l.useState(""),[r,o]=l.useState(!1),b=async c=>{c.preventDefault(),o(!0),p("");try{await I(g,s,t),m(!0)}catch(n){console.error("Login error:",n),p("Invalid email or password.")}finally{o(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto p-8 rounded-2xl glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Admin Login"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#4b5563] mb-1",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Email",value:s,onChange:c=>u(c.target.value),className:"input-field",required:!0,disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#4b5563] mb-1",children:"Password"}),e.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:c=>i(c.target.value),className:"input-field",required:!0,disabled:r})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:r,children:r?"Logging in...":"Login"})]}),x&&e.jsx("p",{className:"text-center mt-4 text-red-500",children:x})]})}),O=k.memo(({db:m,fetchProjects:g,existingProject:s,onDone:u})=>{const[t,i]=l.useState({title:s?.title||"",description:s?.description||"",imageUrl:s?.imageUrl||"",projectLink:s?.projectLink||"",tags:s?.tags?.join(", ")||""}),[x,p]=l.useState(""),r=!!s?.id,o=c=>{const{name:n,value:h}=c.target;i(y=>({...y,[n]:h}))},b=async c=>{c.preventDefault(),p(r?"Updating project...":"Adding project...");try{const n={...t,tags:t.tags.split(",").map(h=>h.trim()).filter(h=>h)};r?await P(E(m,"projects",s.id),n):await A(L(m,"projects"),n),p(`Project ${r?"updated":"added"} successfully!`),g(),setTimeout(()=>u(),1500)}catch(n){console.error("Error saving project:",n),p(`Error: ${n.message}`)}};return e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:r?"Edit Project":"Add New Project"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"title",placeholder:"Project Title",value:t.title,onChange:o,className:"input-field",required:!0}),e.jsx("textarea",{name:"description",placeholder:"Project Description",value:t.description,onChange:o,className:"input-field h-32",required:!0}),e.jsx("input",{type:"text",name:"imageUrl",placeholder:"Image URL",value:t.imageUrl,onChange:o,className:"input-field"}),e.jsx("input",{type:"text",name:"projectLink",placeholder:"Project Link",value:t.projectLink,onChange:o,className:"input-field"}),e.jsx("input",{type:"text",name:"tags",placeholder:"Tags (e.g., React, Firebase, CSS)",value:t.tags,onChange:o,className:"input-field"}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:r?"Update Project":"Add Project"}),e.jsx("button",{type:"button",onClick:u,className:"btn-secondary w-full",children:"Cancel"}),x&&e.jsx("p",{className:"text-center mt-4 text-[#2563eb]",children:x})]})]})}),z=k.memo(({db:m,fetchAllData:g,existingSkill:s,categories:u,onDone:t})=>{const[i,x]=l.useState({name:s?.name||"",level:s?.level||80}),[p,r]=l.useState(s?.category||u[0]||""),[o,b]=l.useState(""),[c,n]=l.useState(""),h=!!s?.id,y=d=>{const{name:f,value:j}=d.target;x(C=>({...C,[f]:f==="level"?parseInt(j,10):j}))},v=async d=>{d.preventDefault();const f=o.trim()||p;if(!i.name||!f){n("Skill name and category are required.");return}n(h?"Updating skill...":"Adding skill...");try{const j={...i,category:f};h?await P(E(m,"skills",s.id),j):await A(L(m,"skills"),j),n(`Skill ${h?"updated":"added"} successfully!`),g(),setTimeout(()=>t(),1500)}catch(j){console.error("Error saving skill:",j),n(`Error: ${j.message}`)}};return e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:h?"Edit Skill":"Add New Skill"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Skill Name (e.g., Python)",value:i.name,onChange:y,className:"input-field",required:!0}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#4b5563] mb-1",children:["Proficiency Level: ",i.level,"%"]}),e.jsx("input",{type:"range",name:"level",min:"1",max:"100",value:i.level,onChange:y,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),e.jsx("select",{name:"category",value:p,onChange:d=>r(d.target.value),className:"input-field",children:u.map(d=>e.jsx("option",{value:d,children:d},d))}),e.jsx("input",{type:"text",name:"newCategory",placeholder:"Or create a new category",value:o,onChange:d=>b(d.target.value),className:"input-field"}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:h?"Update Skill":"Add Skill"}),e.jsx("button",{type:"button",onClick:t,className:"btn-secondary w-full",children:"Cancel"}),c&&e.jsx("p",{className:"text-center mt-4 text-[#2563eb]",children:c})]})]})}),W=k.memo(({db:m,projects:g,skills:s,fetchAllData:u,auth:t})=>{const[i,x]=l.useState("projects"),[p,r]=l.useState(null),[o,b]=l.useState(null),[c,n]=l.useState(""),[h,y]=l.useState(!1),[v,d]=l.useState(null),f=[...new Set(s.map(a=>a.category))];l.useEffect(()=>{if(c){const a=setTimeout(()=>n(""),4e3);return()=>clearTimeout(a)}},[c]);const j=(a,S,w)=>{d({collectionName:a,id:S,itemName:w}),y(!0)},C=async()=>{const{collectionName:a,id:S,itemName:w}=v;n(`Deleting ${w}...`),y(!1);try{await R(E(m,a,S)),n(`${w} deleted successfully.`),u()}catch(U){n(`Error: ${U.message}`)}},T=()=>{y(!1),d(null)};if(p)return e.jsx(O,{db:m,fetchProjects:u,existingProject:p,onDone:()=>r(null)});if(o)return e.jsx(z,{db:m,fetchAllData:u,existingSkill:o,categories:f,onDone:()=>b(null)});const M=l.useCallback(async()=>{try{await q(t)}catch(a){console.error("Logout error:",a)}},[t]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center border-b border-gray-300 mb-8",children:[e.jsx("button",{onClick:()=>x("projects"),className:`py-2 px-6 font-semibold ${i==="projects"?"text-[#2563eb] border-b-2 border-[#2563eb]":"text-gray-500"}`,children:"Manage Projects"}),e.jsx("button",{onClick:()=>x("skills"),className:`py-2 px-6 font-semibold ${i==="skills"?"text-[#2563eb] border-b-2 border-[#2563eb]":"text-gray-500"}`,children:"Manage Skills"})]}),e.jsx(D,{mode:"wait",children:e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[i==="projects"&&e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Projects"}),e.jsx("button",{onClick:()=>r({}),className:"btn-primary mb-4",children:"Add New Project"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:g.map(a=>e.jsxs(N.div,{layout:!0,className:"flex justify-between items-center bg-white/50 p-3 rounded-lg",children:[e.jsx("span",{children:a.title}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>r(a),className:"text-[#2563eb] hover:underline mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>j("projects",a.id,"project"),className:"text-red-500 hover:underline",children:"Delete"})]})]},a.id))})]}),i==="skills"&&e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Skills"}),e.jsx("button",{onClick:()=>b({}),className:"btn-primary mb-4",children:"Add New Skill"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:s.map(a=>e.jsxs(N.div,{layout:!0,className:"flex justify-between items-center bg-white/50 p-3 rounded-lg",children:[e.jsxs("span",{children:[a.name," (",a.category,")"]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>b(a),className:"text-[#2563eb] hover:underline mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>j("skills",a.id,"skill"),className:"text-red-500 hover:underline",children:"Delete"})]})]},a.id))})]})]},i)}),e.jsxs("div",{className:"mt-8",children:[c&&e.jsx("p",{className:"text-center p-3 rounded-lg bg-[#dbeafe] text-[#1e3a8a] font-medium mb-4",children:c}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:M,className:"btn-secondary",children:"Logout"})})]}),e.jsx(D,{children:h&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[100] flex justify-center items-center",children:e.jsxs(N.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"bg-white p-8 rounded-2xl shadow-xl max-w-sm w-full text-center",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",v?.itemName,"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:C,className:"bg-red-500 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-600",children:"Delete"}),e.jsx("button",{onClick:T,className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-md font-semibold hover:bg-gray-300",children:"Cancel"})]})]})})})]})}),G=({db:m,projects:g,skills:s,fetchAllData:u,auth:t})=>{const[i,x]=l.useState(!1);return l.useEffect(()=>t?$(t,r=>{x(!!r)}):void 0,[t]),e.jsx("div",{className:"bg-[#f5f7fa] min-h-screen",children:e.jsx("div",{className:"container mx-auto px-6 py-12",children:i?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-4xl font-bold text-[#334155] text-center mb-12",children:"Admin Dashboard"}),e.jsx(W,{db:m,projects:g,skills:s,fetchAllData:u,auth:t})]}):e.jsx(F,{onLogin:x,auth:t})})})};export{G as default};
