import{r as a,g as V,c as U,d as C,a as W,o as X,j as e,L as _,m as u,s as B,b as J,e as Q,f as Y,h as Z,i as ee,A as se}from"./index-CKQSR69i.js";const F=({message:l,type:o,onDismiss:p})=>{if(!l)return null;const m="fixed top-5 right-5 p-4 rounded-lg shadow-lg text-white transition-opacity duration-300 z-50",x=o==="success"?"bg-green-500":"bg-red-500";return e.jsxs("div",{className:`${m} ${x}`,children:[e.jsx("span",{children:l}),e.jsx("button",{onClick:p,className:"ml-4 font-bold",children:"X"})]})},te=({isOpen:l,onConfirm:o,onCancel:p,title:m,message:x})=>e.jsx(se,{children:l&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:p,children:e.jsxs(u.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:j=>j.stopPropagation(),className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:m}),e.jsx("p",{className:"text-slate-600 mb-6",children:x}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 rounded-lg bg-slate-200 hover:bg-slate-300 transition",children:"Cancel"}),e.jsx("button",{onClick:o,className:"px-4 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition",children:"Confirm"})]})]})})});function ie({db:l,auth:o,storage:p}){const[m,x]=a.useState(null),[j,O]=a.useState(!0),[k,P]=a.useState([]),[g,N]=a.useState({licensesPdfUrl:"",internshipsPdfUrl:""}),[f,h]=a.useState({message:"",type:""}),[S,w]=a.useState({isOpen:!1,onConfirm:()=>{}}),[A,T]=a.useState(""),[D,I]=a.useState(""),[n,r]=a.useState({title:"",description:"",link:"",tags:[]}),[b,L]=a.useState(""),[c,d]=a.useState(!1),[ae,ne]=a.useState(!1),i=a.useCallback((s,t="error")=>{h({message:s,type:t}),setTimeout(()=>h({message:"",type:""}),5e3)},[]),v=a.useCallback(async()=>{try{const t=(await V(U(l,"projects"))).docs.map(y=>({id:y.id,...y.data()}));P(t)}catch(s){console.error("Error fetching projects:",s),i("Failed to fetch projects.")}},[l,i]),E=a.useCallback(async()=>{try{const s=C(l,"portfolioAssets","main"),t=await W(s);t.exists()&&N(t.data())}catch(s){console.error("Error fetching assets:",s),i("Failed to fetch asset links.")}},[l,i]);a.useEffect(()=>{const s=X(o,t=>{x(t),t&&(v(),E()),O(!1)});return()=>s()},[o,v,E]);const R=async s=>{s.preventDefault(),d(!0);try{await B(o,A,D)}catch{i("Login failed: Invalid credentials.")}finally{d(!1)}},M=async()=>{await J(o)},q=s=>{s.key==="Enter"&&b&&(s.preventDefault(),n.tags.includes(b)||r({...n,tags:[...n.tags,b]}),L(""))},z=s=>{r({...n,tags:n.tags.filter(t=>t!==s)})},$=async s=>{if(s.preventDefault(),!n.title.trim())return i("Project title is required.");d(!0);try{await Q(U(l,"projects"),{...n,createdAt:Y()}),r({title:"",description:"",link:"",tags:[]}),i("Project added successfully!","success"),v()}catch{i("Failed to add project.")}finally{d(!1)}},G=s=>{w({isOpen:!0,onConfirm:()=>H(s)})},H=async s=>{try{await Z(C(l,"projects",s)),P(t=>t.filter(y=>y.id!==s)),i("Project deleted successfully.","success")}catch{i("Failed to delete project.")}finally{w({isOpen:!1,onConfirm:()=>{}})}},K=async s=>{s.preventDefault(),d(!0);try{const t=C(l,"portfolioAssets","main");await ee(t,g,{merge:!0}),i("Asset links updated successfully!","success")}catch{i("Failed to update asset links.")}finally{d(!1)}};return j?e.jsx(_,{}):m?e.jsxs(e.Fragment,{children:[e.jsx(te,{isOpen:S.isOpen,onConfirm:S.onConfirm,onCancel:()=>w({isOpen:!1,onConfirm:()=>{}}),title:"Confirm Deletion",message:"Are you sure you want to delete this project? This action cannot be undone."}),e.jsxs("div",{className:"min-h-screen bg-slate-100 p-4 sm:p-6 md:p-8",children:[e.jsx(F,{message:f.message,type:f.type,onDismiss:()=>h({message:"",type:""})}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Admin Dashboard"}),e.jsx("button",{onClick:M,className:"bg-red-500 text-white px-5 py-2 rounded-lg font-semibold hover:bg-red-600 transition-colors",children:"Logout"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"Add New Project"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Project Title",value:n.title,onChange:s=>r({...n,title:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("textarea",{placeholder:"Description",value:n.description,onChange:s=>r({...n,description:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3"}),e.jsx("input",{type:"url",placeholder:"Project Link (e.g., GitHub)",value:n.link,onChange:s=>r({...n,link:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Add skills/tags and press Enter",value:b,onChange:s=>L(s.target.value),onKeyDown:q,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:n.tags.map(s=>e.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-1 rounded-full flex items-center",children:[s,e.jsx("button",{type:"button",onClick:()=>z(s),className:"ml-2 text-blue-600 hover:text-blue-800",children:"x"})]},s))})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-green-500 text-white py-2 rounded-lg font-semibold hover:bg-green-600 transition disabled:bg-slate-400",children:c?"Adding...":"Add Project"})]})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"Manage Asset Links"}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsx("input",{type:"url",placeholder:"Licenses & Certs PDF URL",value:g.licensesPdfUrl,onChange:s=>N({...g,licensesPdfUrl:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"url",placeholder:"Internship Certs PDF URL",value:g.internshipsPdfUrl,onChange:s=>N({...g,internshipsPdfUrl:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-purple-500 text-white py-2 rounded-lg font-semibold hover:bg-purple-600 transition disabled:bg-slate-400",children:c?"Saving...":"Save Links"})]})]})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"Manage Projects"}),e.jsx("div",{className:"space-y-4",children:k.length>0?k.map(s=>e.jsxs("div",{className:"flex items-start justify-between border-b border-slate-200 py-3",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:s.title}),e.jsx("p",{className:"text-slate-600 text-sm mt-1",children:s.description}),s.link&&e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline text-sm",children:"View Link"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.tags?.map(t=>e.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs font-medium px-2 py-0.5 rounded-full",children:t},t))})]}),e.jsx("button",{onClick:()=>G(s.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-red-600 transition flex-shrink-0",children:"Delete"})]},s.id)):e.jsx("p",{className:"text-slate-500",children:"No projects found. Add one to get started!"})})]})]})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4",children:[e.jsx(F,{message:f.message,type:f.type,onDismiss:()=>h({message:"",type:""})}),e.jsx(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white shadow-2xl rounded-xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-700 text-center mb-6",children:"Admin Login"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsx("input",{type:"email",placeholder:"Email",value:A,onChange:s=>T(s.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",required:!0}),e.jsx("input",{type:"password",placeholder:"Password",value:D,onChange:s=>I(s.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",required:!0}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-slate-400",children:c?"Logging in...":"Login"})]})]})})]})}export{ie as default};
