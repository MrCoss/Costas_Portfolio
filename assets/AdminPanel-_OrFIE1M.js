import{r as l,o as C,j as e,R as f,A as S,m as k,d as P,a as w,u as A,b as E,c as D}from"./index-C0Shd2xY.js";const $=f.memo(({onLogin:r,auth:d})=>{}),L=f.memo(({db:r,fetchProjects:d,existingProject:n,onDone:i})=>{}),M=f.memo(({db:r,fetchAllData:d,existingSkill:n,categories:i,onDone:o})=>{const[s,m]=l.useState({name:n?.name||"",level:n?.level||80}),[b,u]=l.useState(n?.category||i[0]||""),[g,p]=l.useState(""),[x,c]=l.useState(""),h=!!n?.id,y=t=>{const{name:j,value:a}=t.target;m(N=>({...N,[j]:j==="level"?parseInt(a,10):a}))},v=async t=>{t.preventDefault();const j=g.trim()||b;if(!s.name||!j){c("Skill name and category are required.");return}c(h?"Updating skill...":"Adding skill...");try{const a={...s,category:j};h?await A(w(r,"skills",n.id),a):await E(D(r,"skills"),a),c(`Skill ${h?"updated":"added"} successfully!`),d(),setTimeout(()=>o(),1500)}catch(a){console.error("Error saving skill:",a),c(`Error: ${a.message}`)}};return e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:h?"Edit Skill":"Add New Skill"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Skill Name (e.g., Python)",value:s.name,onChange:y,className:"input-field",required:!0}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#4b5563] mb-1",children:["Proficiency Level: ",s.level,"%"]}),e.jsx("input",{type:"range",name:"level",min:"1",max:"100",value:s.level,onChange:y,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),e.jsx("select",{name:"category",value:b,onChange:t=>u(t.target.value),className:"input-field",children:i.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("input",{type:"text",name:"newCategory",placeholder:"Or create a new category",value:g,onChange:t=>p(t.target.value),className:"input-field"}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:h?"Update Skill":"Add Skill"}),e.jsx("button",{type:"button",onClick:o,className:"btn-secondary w-full",children:"Cancel"}),x&&e.jsx("p",{className:"text-center mt-4 text-[#2563eb]",children:x})]})]})}),T=f.memo(({db:r,projects:d,skills:n,fetchAllData:i,auth:o})=>{const[s,m]=l.useState("projects"),[b,u]=l.useState(null),[g,p]=l.useState(null),[x,c]=l.useState(""),h=[...new Set(n.map(t=>t.category))];if(l.useEffect(()=>{if(x){const t=setTimeout(()=>c(""),4e3);return()=>clearTimeout(t)}},[x]),b)return e.jsx(L,{db:r,fetchProjects:i,existingProject:b,onDone:()=>u(null)});if(g)return e.jsx(M,{db:r,fetchAllData:i,existingSkill:g,categories:h,onDone:()=>p(null)});const y=async(t,j,a)=>{if(window.confirm(`Are you sure you want to delete this ${a}?`)){c(`Deleting ${a}...`);try{await P(w(r,t,j)),c(`${a} deleted successfully.`),i()}catch(N){c(`Error: ${N.message}`)}}},v=async()=>{};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center border-b border-gray-300 mb-8",children:[e.jsx("button",{onClick:()=>m("projects"),className:`py-2 px-6 font-semibold ${s==="projects"?"text-[#2563eb] border-b-2 border-[#2563eb]":"text-gray-500"}`,children:"Manage Projects"}),e.jsx("button",{onClick:()=>m("skills"),className:`py-2 px-6 font-semibold ${s==="skills"?"text-[#2563eb] border-b-2 border-[#2563eb]":"text-gray-500"}`,children:"Manage Skills"})]}),e.jsx(S,{mode:"wait",children:e.jsxs(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[s==="projects"&&e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Projects"}),e.jsx("button",{onClick:()=>u({}),className:"btn-primary mb-4",children:"Add New Project"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:d.map(t=>e.jsxs(k.div,{layout:!0,className:"flex justify-between items-center bg-white/50 p-3 rounded-lg",children:[e.jsx("span",{children:t.title}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>u(t),className:"text-[#2563eb] hover:underline mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>y("projects",t.id,"project"),className:"text-red-500 hover:underline",children:"Delete"})]})]},t.id))})]}),s==="skills"&&e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Skills"}),e.jsx("button",{onClick:()=>p({}),className:"btn-primary mb-4",children:"Add New Skill"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:n.map(t=>e.jsxs(k.div,{layout:!0,className:"flex justify-between items-center bg-white/50 p-3 rounded-lg",children:[e.jsxs("span",{children:[t.name," (",t.category,")"]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>p(t),className:"text-[#2563eb] hover:underline mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>y("skills",t.id,"skill"),className:"text-red-500 hover:underline",children:"Delete"})]})]},t.id))})]})]},s)}),e.jsxs("div",{className:"mt-8",children:[x&&e.jsx("p",{className:"text-center p-3 rounded-lg bg-[#dbeafe] text-[#1e3a8a] font-medium mb-4",children:x}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:v,className:"btn-secondary",children:"Logout"})})]})]})}),R=({db:r,projects:d,skills:n,fetchAllData:i,auth:o})=>{const[s,m]=l.useState(!1);return l.useEffect(()=>C(o,u=>{m(!!u)}),[o]),e.jsx("div",{className:"bg-[#f5f7fa] min-h-screen",children:e.jsx("div",{className:"container mx-auto px-6 py-12",children:s?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-4xl font-bold text-[#334155] text-center mb-12",children:"Admin Dashboard"}),e.jsx(T,{db:r,projects:d,skills:n,fetchAllData:i,auth:o})]}):e.jsx($,{onLogin:m,auth:o})})})};export{R as default};
