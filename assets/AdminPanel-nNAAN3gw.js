import{r as i,o as C,j as e,R as N,A as v,m as w,s as A,d as P,a as b,b as D,c as S,u as U,e as k,f as E}from"./index-BI8isK_S.js";const $=N.memo(({onLogin:c,message:h,auth:t})=>{const[l,n]=i.useState(""),[o,d]=i.useState(""),[a,r]=i.useState(h),u=async m=>{m.preventDefault(),r("Logging in...");try{await A(t,l,o),r("Login successful!"),c(!0)}catch(p){console.error("Login error:",p),r(`Login failed: ${p.message}`),c(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f5f7fa]",children:e.jsxs("form",{onSubmit:u,className:"p-8 rounded-2xl w-full max-w-sm glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] text-center mb-6",children:"Admin Login"}),e.jsx("input",{type:"email",value:l,onChange:m=>n(m.target.value),placeholder:"Email",className:"input-field mb-4",required:!0}),e.jsx("input",{type:"password",value:o,onChange:m=>d(m.target.value),placeholder:"Password",className:"input-field mb-4",required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Login"}),a&&e.jsx("p",{className:"text-red-500 text-center mt-4",children:a})]})})}),q=N.memo(({db:c,fetchProjects:h,existingProject:t,onDone:l})=>{const[n,o]=i.useState({title:t?.title||"",description:t?.description||"",tags:Array.isArray(t?.tags)?t.tags.join(", "):t?.tags||"",projectLink:t?.projectLink||"",imageUrl:t?.imageUrl||""}),[d,a]=i.useState(""),r=!!t?.id,u=p=>{const{name:f,value:g}=p.target;o(x=>({...x,[f]:g}))},m=async p=>{p.preventDefault(),a(r?"Updating...":"Adding...");const f=(n.tags||"").split(",").map(x=>x.trim()).filter(Boolean),g={...n,tags:f};try{r?await U(b(c,"projects",t.id),g):await k(E(c,"projects"),g),a(`Project ${r?"updated":"added"} successfully!`),h(),setTimeout(()=>l(),1500)}catch(x){console.error(x),a(`Error: ${x.message}`)}};return e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:r?"Edit Project":"Add New Project"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"title",placeholder:"Project Title",value:n.title,onChange:u,className:"input-field",required:!0}),e.jsx("textarea",{name:"description",placeholder:"Description",value:n.description,onChange:u,className:"input-field",required:!0}),e.jsx("input",{type:"text",name:"tags",placeholder:"Tags (comma-separated)",value:n.tags,onChange:u,className:"input-field"}),e.jsxs("label",{className:"block text-sm font-medium text-[#4b5563] mt-4",children:["Image URL (e.g., Imgur)",e.jsx("input",{type:"url",name:"imageUrl",placeholder:"Paste image link here",value:n.imageUrl,onChange:u,className:"input-field"})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:r?"Update Project":"Add Project"}),e.jsx("button",{type:"button",onClick:l,className:"btn-secondary w-full",children:"Cancel"}),d&&e.jsx("p",{className:"text-center mt-4 text-[#2563eb]",children:d})]})]})}),M=N.memo(({db:c,projects:h,fetchProjects:t,auth:l})=>{const[n,o]=i.useState(null),[d,a]=i.useState(""),[r,u]=i.useState(""),[m,p]=i.useState("");if(i.useEffect(()=>{if(d){const s=setTimeout(()=>a(""),4e3);return()=>clearTimeout(s)}},[d]),n)return e.jsx(q,{db:c,fetchProjects:t,existingProject:n,onDone:()=>o(null)});const f=async s=>{if(window.confirm("Are you sure you want to delete this project?")){a("Deleting...");try{await P(b(c,"projects",s)),a("Project deleted successfully."),t()}catch(y){a(`Error: ${y.message}`)}}},g=async(s,y,j)=>{if(s.preventDefault(),!!y){a(`Updating ${j}...`);try{await D(b(c,"portfolioAssets",j),{pdfUrl:y}),a(`${j} link updated successfully!`),j==="licenses"&&u(""),j==="internships"&&p(""),t()}catch(L){a(`Error: ${L.message}`)}}},x=async()=>{try{await S(l),window.location.hash=""}catch(s){console.error("Logout error:",s)}};return e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"p-8 rounded-2xl glass-card lg:col-span-2",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Manage Projects"}),e.jsx("button",{onClick:()=>o({}),className:"btn-primary mb-4",children:"Add New Project"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:e.jsx(v,{children:h.map(s=>e.jsxs(w.div,{layout:!0,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"flex justify-between items-center bg-white/50 p-3 rounded-lg",children:[e.jsx("span",{className:"text-[#4b5563] font-medium",children:s.title}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>o(s),className:"text-[#2563eb] hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>f(s.id),className:"text-red-500 hover:underline",children:"Delete"})]})]},s.id))})})]}),e.jsxs("div",{className:"p-8 rounded-2xl glass-card",children:[e.jsx("div",{className:"glow-effect"}),e.jsx("h2",{className:"text-2xl font-bold text-[#334155] mb-6",children:"Update Certificate PDFs"}),e.jsxs("form",{onSubmit:s=>g(s,r,"licenses"),className:"space-y-4 mb-6",children:[e.jsx("input",{type:"url",placeholder:"Licenses & Certs PDF Link",value:r,onChange:s=>u(s.target.value),className:"input-field",required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Update Licenses"})]}),e.jsxs("form",{onSubmit:s=>g(s,m,"internships"),className:"space-y-4",children:[e.jsx("input",{type:"url",placeholder:"Internships PDF Link",value:m,onChange:s=>p(s.target.value),className:"input-field",required:!0}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Update Internships"})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(v,{children:d&&e.jsx(w.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-center p-3 rounded-lg bg-[#dbeafe] text-[#1e3a8a] font-medium",children:d})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:x,className:"btn-secondary",children:"Logout"})})]})]})}),T=({db:c,projects:h,fetchProjects:t,auth:l})=>{const[n,o]=i.useState(!1);return i.useEffect(()=>C(l,a=>{o(!!a)}),[l]),e.jsx("div",{className:"bg-[#f5f7fa] min-h-screen",children:e.jsx("div",{className:"container mx-auto px-6 py-12",children:n?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-4xl font-bold text-[#334155] text-center mb-12",children:"Admin Dashboard"}),e.jsx(M,{db:c,projects:h,fetchProjects:t,auth:l})]}):e.jsx($,{onLogin:o,auth:l})})})};export{T as default};
